---
title: "Basel Risk-weights and Bank Lending"
date: '\emph{\today}'
output:
  bookdown::pdf_document2:
    fig_caption: yes
    #citation_package: natbib
    latex_engine: pdflatex
    template: tex-ms.tex
  pdf_document: default
  word_document: default
author:
- name: "Lucas Avezum"
  affiliation: "CentER and EBC, Tilburg University"
- name: "Harry Huizinga"
  affiliation: "CentER and EBC, Tilburg University and CEPR"
- name: "Louis Raes"
  affiliation: "CentER and EBC, Tilburg University"
biblio-style: apsr
bibliography: ../../Auxiliar/mybibfile.bib
citecolor: black
csl: ../../Auxiliar/Citation_styles/american-marketing-association.csl
#anonymous: no
fontsize: 12pt
geometry: margin= 1in
header-includes: \usepackage{rotating, graphicx, dcolumn, longtable, float, siunitx, tabularx, appendix, booktabs} 
keywords: Bank regulation, Bank supervision, Credit supply
linkcolor: black
abstract: We estimate the effect of capital requirements on credit supply and investigate if strategic modeling explains the effect. Using the cross-border syndicated loan market, a hand-collected dataset on corporate risk-weights, and an instrumental variable strategy, we find that banks with lower risk-weights lend more. The effect is stronger among small, and more profitable banks and weaker for banks with lower NPL ratios and for banks experiencing a fall in their capital ratios. We further test the strategic modeling hypothesis and find that higher supervisory scrutiny decreases the effect of risk-weight on lending. Taken together, the results suggest that, if allowed, banks manipulate risk-weights to gain an advantage in the corporate lending market.
spacing: double
indent: true
subtitle: ''
thanks: Preliminary draft.
JEL: E51, G21, G28
urlcolor: black
toc: FALSE
---




```{r setup, include=FALSE}
knitr::opts_chunk$set(echo      = FALSE, 
                      warning   = FALSE, 
                      error     = FALSE, 
                      tidy      = TRUE, 
                      tidy.opts = list(width.cutoff=50), 
                      collapse  = TRUE,
                      warning   = FALSE,
                      error     = FALSE,
                      message   = FALSE, 
                      comment   = "",
                      cache     = FALSE,
                      fig.pos   = 'H')
# These options are tuned for manuscript/presentation. 
# They basically run R in the background except for spitting out figures/tables
# They also cache results so that you don't have to run your whole analysis every time you fix a typo

rm(list = ls()) 

library(tidyverse)            ## Data manipulation, pipe operator
library(data.table)           ## Command to bind lists
library(ggridges)             ## Density ridges plot
library(stargazer)            ## Latex tables
library(lfe)                  ## High-dimensional fixed effects
library(gridExtra)            ## Create grid for plots and tables
library(cowplot)              ## Create grid for plots and tables
library(multipanelfigure)     ## Create grid for figures
library(DescTools)            ## Command to winsorize variables
library(ggpubr)               ## More plots
library(splitstackshape)      ## Command to expand data
library(latex2exp)            ## Use latex code in plots
library(lemon)                ## Plot brackets
library(fastDummies)
#library(mosaic)               ## Package to calculate derivatives
#library(textablr)
#library(sandwich)
#library(lmtest)
#library(relaimpo)            ## Calculate relative importance measures



```

```{r load data, include=TRUE}
load("../../Data/Datasets/LoanData.Rda")
load("../../Data/Temp/Pillar3Data.Rda")
load("../../Data/Temp/AuxiliarData.Rda")
#load("../../Data/Datasets/BankData.Rda")
#load("../../Data/Datasets/CountryData.Rda")
```


\section{Introduction} \label{sec:intro}

Bank capital requirements are the main tool supervisors have to improve stability in the banking sector. Following the 2008 financial crisis, the new international regulatory framework, known as Basel III, increased substantially the quantity and quality of capital requirements for that purpose. While there is a consensus on the benefits of capital requirements on financial stability, finding the optimal level of capital requirement requires quantifying their costs. Arguably the most important cost is the reduction of credit supply associated to capital requirements. Because raising equity is costly, banks tend to meet capital requirements by shrinking their assets, hence reducing credit supply.

Furthermore, since the Basel II framework, banks have the option to calculate capital requirements using risk estimates obtained from their own models, known as the internal ratings-based (IRB) approach. The rationale for risk-linked capital charges, or risk-weights, are, first, to reduce the incentives to take on excessive risk, associated with imposing requirement on a simple capital to asset ratio [@koehn1980regulation; @kim1988risk; @gordy2010risk], and, second, to improve the alignment of risk estimates to actual portfolio risk [@barakova2014banks] and to promote better risk management practices [@cucinelli2018credit]. However, the inherent flexibility and complexity of the IRB approach may allow for differences in risk-weights across banks that do not reflect portfolio risk but rather modeling choices [@le2012revisiting; @mariathasan2014manipulation; @behn2016limits;@berg2017analysis; @ferribank].  

In this paper, we estimate the effect of capital requirements on credit supply and investigate if strategic modeling explains the effect. Because we cannot observe if banks are misreporting the riskiness in their portfolio, our strategy is to indirectly infer the importance of strategic modeling by studying the interaction of several bank and supervision characteristics with the effect of capital requirements on bank lending. Moreover, the empirical identification of the effect of capital requirements on bank lending faces other two important challenges. First, variation of capital requirements across banks is not exogenous as bank-specific requirements are likely to correlate with their observed and unobserved bank characteristics. Second, the identification of an effect on credit supply requires the control of credit demand.      

We address the issue of exogeneity using the quasi-random adoption to the Basel II accord as an instrument. The relevance condition is satisfied since banks could implement the IRB approach only after their jurisdiction had implemented the the Basel II framework. The exclusion condition can be argued with the following three arguments: first, Basel II was established by an international committee, and the rules only available after it was published in June 2004. Second, jurisdictions adopted the rules at different times, reflecting different legislative procedures or other institutional differences. Third, although the use of IRB approach was conceptualized to be a choice of banks, it was still conditional on the approval of the supervisory authority and, in some jurisdictions, it was even imposed to large banks.   

We address the issue of disentangling credit supply from credit demand by exploring lending variation on the cross-border syndicated loan market. Syndicated loans are loan agreements between one borrower and several lenders which allow us to apply the estimator proposed by @khwaja2008tracing to control for credit demand. Because of lending home-bias, we focus on the cross-border loan market. 

For the measure of capital requirements, we collect information on the corporate portfolio risk-weights from banks' individual Pillar-3 reports. The sample consists of 59 large banking groups that have adopted the IRB approach from 15 countries. We also identified several banks from the same countries that have not adopted the IRB approach and, consequently, still use the less risk-sensitive standardized approach to calculate their capital requirements. 

We find that banks with lower risk-weights lend more. In our preferable specification, the estimation implies that a decrease of one standard deviation in risk-weights increases lending by 2.4%. To put the result in perspective, the average standard deviation of the loan amount within a syndication is \$15 millions or 27.2% of the average loan amount. Hence, the effect of risk-weight explain roughly 9% of the variation of lending across banks in a syndication. While most of the identified effect of risk-weights on corporate lending comes from comparing lending from banks under the IRB approach with lending from banks under the standardized approach, we find that the variation of risk-weights across banks that have already introduced the IRB approach also affects corporate lending.

We then investigate the mechanisms driving the effect. We find the effect of risk-weights on corporate lending to be stronger among small, and more profitable banks and weaker for banks with lower NPL ratios and for banks experiencing a fall in their capital ratios. We also find evidence that both too-big-too-fail and too-big-too-save status matter for how banks explore low risk-weights to increase lending, with the first reinforcing and the second mitigating the effect. The results are also consistent with supervisors focusing on banks absolute size, instead of their systemic size, when deciding to allocate resources to validate banks’ risk models. Overall, the estimated interactions suggest incentives that relies on the ability of banks to manipulate their risk models. To further test the manipulation hypothesis, we study the interaction of the effect with variables that measure the degree of supervisory scrutiny. In all of the estimations, we find that higher supervisory scrutiny decreases the effect of risk-weight on lending, suggesting that, if allowed, banks manipulate risk-weights to gain an advantage in the corporate lending market. The results also corroborates to recent findings that monetary policy and bank supervision tasks tend to complement each other, resulting in less scope for strategic modeling.     

This papers contributes to two strands of literature. First, our paper is related to the literature examining the effect of capital requirements on bank lending. Several papers exploit changes in bank-specific capital requirements [@aiyar2014international; @imbierowicz2018time; @de2020bank]. @aiyar2014international study the cross-border lending market and find a substantial negative impact of capital requirements on bank lending. However, they rely only on cross-border lending from the UK and have only lending information aggregated at the borrowers' country level.   Other studies use exogenous shocks on capital requirements to identify the effect on bank lending [@peek1997international; @behn2016procyclical; @cappelletti2019impact; @fang2020bank; @fraisse2020real]. Our paper is closely related to @fraisse2020real who exploit variation in capital requirements across banks and borrowers due to the use of internal risk models. While they also find a negative effect of higher capital requirements on bank lending, different from our evidence, they argue that strategic modeling is not a driver of their results. Moreover, our international setting allow us to use the adoption of Basel II as an instrument and improve the identification of the effect. Although @fang2020bank find a small effect of capital requirements on bank lending, similar to our results, they show that the impact of capital requirements varies with economic conditions and bank characteristics. Overall, our contribution to this literature is the identification of a negative effect of risk-weights on bank credit supply to corporations in an international setting. Different from the effect of a capital requirement shock, which can be temporary - if, with time, banks increase lending by raising equity-, the identified effect of risk-weights suggest a more permanent impact on lending since raising equity does not change the rate at which banks have to hold capital for each asset.      

Second, several studies document significant capital requirements variability across otherwise similar banks. Some take this evidence as indicative of either excessive subjectivity in the current capital requirement rules or risk measurement manipulation by banks to decrease capital charges [@mariathasan2014manipulation; @ferribank]. Others are more cautious and emphasize that part of the capital requirements variability is desirable since it reflects differences in risk among banks [@cannata2012inside; @BCBS2016regulatory;@berg2017analysis; @EBA2019result]. We contribute to this literature by identifying an effect of strategic modeling: banks have incentives to manipulate their risk-models to gain an advantage in the lending market.

The remainder of this paper is organized as follows. Section \ref{sec:data} describes the data, with a focus on the hand-collected data on corporate risk-weights, and the empirical strategy. Section \ref{sec:results} presents evidence on the effect of risk-weights on corporate lending. Finally, section \ref{sec:conclusion} concludes. 

\section{Data and Methodology} \label{sec:data}

To study the effect of risk-weights on cross-border credit supply, we construct a sample of syndicated loans matched with bank characteristics, including the average risk-weights for their corporate portfolio. We start the section describing the sample construction and summarizing its characteristics. We then introduce in more detail the hand-collected dataset on corporate portfolio risk-weights followed by the explanation of our empirical strategy.  

\subsection{Sample Construction} \label{sec:sample}

For information on corporate loans, we obtain data from the Loan Pricing Corporation’s Dealscan database. The Dealscan database contains several loan-level characteristics from syndicated loans along with some bank and borrower information, such as their name and location. Syndicated loans are loan agreements between one borrower and several lenders. For a number of syndicated loans, the Dealscan database includes the share of each lender in the syndicated loan. Hence, observations in the database are different bank-firm-loan combinations, which we define as loans. With the exception of the amount of each lender, all other loan conditions are common for lenders in a syndication. Because we restrict our analysis to cross-border lending, we exclude observations if the borrower and lender are from the same country. We assign the lender's loan amount at the holding company level. Because of internal capital markets, ultimately the capital position of the holding company is the biding constrain for lending [@houston1997capital]. Therefore, we consider as cross-border loans those provided by the parent company or by subsidiaries located in the borrower's country (or in third countries).   

We collect information on the corporate portfolio risk-weights from banks' individual Pillar-3 reports. The dataset consists of 59 large banking groups, from 15 OECD countries, that have adopted the IRB approach. For each bank, we collected consolidated information from the year the IRB approach was approved until 2018. Our selection criteria was size, measured by their total assets, but we were constrained by data availability from the Pillar-3 reports. We also identified several banks from OECD countries that have not adopted the IRB approach and, consequently, use the standardized approach to calculate their capital requirements. From these banks, we kept in the sample, those that have a size, measured by their total assets, at least as larger as the smallest bank that have adopted the IRB approach in the sample. 

Finally, for balance sheet information of banks, we use the Bureau van Dijk's Bankscope database. We collect information starting from 2001 until 2018. We merge the three datasets (Dealscan, Bankscope, and Pillar-3 report information) by hand-matching the names of lenders. We double-check our matching with the lender link table constructed by @schwert2018bank. We end up with a sample of 89,404 loans for 91 banks, 57 of which have introduced the IRB approach, from 20 countries for the period of 2001 to 2018.

Summary statistics are shown in Table \ref{tab:summary}. All variables from the Dealscan and Bankscope datasets are winsorized at 1% and 99%. Our dependent variable is the natural logarithm of the dollar amount of a bank's share in a syndicated loan ($\text{Log loan}_{l,i}$). The loans in our sample are distributed around 57 million dollars ranging from 341 thousand dollars to 382 million dollars. The main variable of interest, the corporate portfolio risk-weight ($\text{RW}_{i,t}$), averages 0.76 ranging from 0.07 to 1.03. In one model specification, we replace the risk-weight variable for a dummy variable that equals one for the years banks adopted the IRB approach. A little more than half of our sample is of banks using the standardize approach. These observations are either from IRB banks that had not yet adopted the IRB approach or from banks that never adopted it between 2001 and 2018. The instrument is a dummy variable that takes the value of one for the years since the introduction of the Basel II accord in the home country of the lender ($\text{Basel II}_{c,t}$). Information on the introduction of Basel II comes from @cerutti2018changes.\footnote{For the United Stats, we consider 2014 as the year of Basel "introduction" because this was the year the first american banks exit the parallel run and were allowed to use the IRB approach.} 

In the empirical analysis, we also include a range of country and bank control variables. To control for the economic environment, we include $\text{GDP growth rate}_{c,t}$, which is the real GDP annual growth rate for the lender's home country. Several papers provide evidence of the procyclical nature of both lending and risk-weights. Following the findings of @demirgucc2017foreign that monetary policy impacts cross-border lending, we include $\text{Policy rate}_{c,t}$, the policy rate of the lender's home country. At the bank-level, our measure of size is the natural logarithm of the dollar amount of a bank's total asset ($\text{Log assets}_{i,t}$). The expectation of the effect of size on lending is unambiguous: large banks should lend more. The effect on risk-weights is ambiguous thou. On the one hand, large banks could benefit from a large pool of human and technical resources to develop risk models in their favor, in other words, models that result in lower risk-weights. On the other hands, because they are large, the supervisor authorities could dedicate more resources to evaluate and approve the models of large banks, hence, reducing the scope for manipulation. To capture differences in the balance-sheet structure we include two variables. On the liabilities side, $\text{Deposit ratio}_{i,t}$ is the ratio of total customer deposits to total asset. Because of lower market discipline from insured deposit markets, banks with a larger share of funding from deposits could have stronger incentives to manipulate their risk-weights. On the asset side, $\text{Loans ratio}_{i,t}$ is the ratio of gross loans to total assets. We expect banks specialized in the credit market to lend more and also to have higher risk-weights, as specialized banks could be more inclined to take risks in the credit market. Lastly, to control for the type of bank activity, we include $\text{Net interest income}_{i,t}$, the ratio of net interest income to operating income. A higher share of interest revenue should be associated to specialization in lending and, again, banks specialized in the credit market should lend more and take more risk in this market (and consequently, charge a higher average interest rate). We describe the expected effect, and the interaction with the risk-weight for the remaining variables throughout the result section.    

\subsection{Corporate Portfolio Risk-weights} \label{sec:rw}

In this section, we introduce in more detail the hand-collected dataset on corporate portfolio risk-weights. We provide summary statistics and describe the two sources of variation in risk-weight important for our empirical strategy: the introduction of the IRB approach and the variation between banks and countries.   

Figure \ref{fig:alldata} shows the evolution in time of corporate portfolio risk-weights for every bank that has introduced the IRB approach in the sample. There is substantial risk-weight variation among banks. Figure \ref{fig:rwhistogram} presents the distribution of corporate risk-weight under the IRB approach at the bank-year level. The average of the distribution is 0.49 and the interquartile range is 0.19. 

Figure \ref{fig:betweenwithin} provides an example that shows that risk-weights differ among banks within a country. Although the average risk-weight of French and Canadian banks are very similar, the risk-weight variance among Canadian banks is much larger than the variance among French banks. This pattern persists from the time the IRB approach was introduced, mostly in 2008, to the end of the sample in 2018. The differences in variance across countries suggest that banks' risk-weights are not overwhelmed by a home-bias riskiness but might reflect, among other, different risk-preferences, risk modeling choices, and supervisory standards.         

Figure \ref{fig:alldata} also shows the evolution of the average corporate portfolio risk-weights for the banks in the sample. The downward trend in the average risk-weight is partly explained by the banks introducing the IRB approach, which, for the most part, results in lower risk-weights than the standardized approach. Figure \ref{fig:introyear} shows the number of banks in our sample that have introduced the IRB approach between 2007 and 2018. Most banks adopted the IRB approach in 2008, but in every year since 2007 there is at least one bank that had adopted the IRB approach. The timing of IRB approach adoption varies somewhat within a country, being Italy the most extreme case where banks have introduced the IRB approach in 4 different years (see Figure \ref{fig:introwithin}). There is also some variation between countries, especially when comparing the American banks to others, as the former could only use the IRB approach for calculating their capital requirements from 2014 onward (see Figure \ref{fig:introbetween}). The impact of the IRB adoption on the average trend is shown in figure \ref{fig:irb_intro}. We replace the bank-year observations after the introduction of the IRB approach for the risk-weight value at the year the IRB approach was introduced for that bank. Because we remove the within bank variation, the downward trend in figure \ref{fig:irb_intro} is only the results of changes in the composition between banks that have and have not adopted the IRB approach.   

Figure \ref{fig:irb_var} shows that within bank trend also contributes, albeit marginally, to the aggregate downward trend shown in figure \ref{fig:alldata}. In this figure, we remove from the bank-year observations after the introduction of the IRB approach the risk-weight change at the year of IRB introduction. Therefore, the downward trend in figure \ref{fig:irb_var}is only the results of within bank risk-weight changes once the IRB has been introduced. It is worth noting, that the downward trend is not a common feature to all banks or countries. Figure \ref{fig:trend} shows that, at the time of introduction, risk-weights for Swiss banks were lower than for their Swedish peers, however, an upward trend for Swiss banks in recent years led to the average risk-weight in Swiss corporate portfolio being higher than the respective Swedish average in 2018.

To summarize, risk-weights for corporate portfolio differ significantly across banks, and across countries. The downward trend is mostly explained by the introduction the IRB approach although risk-weights have also decreased since banks introduced the IRB approach. 

\subsection{Empirical Strategy} \label{sec:method}


The empirical strategy relies on the use of loan-level information to control for borrower characteristics and using the introduction of Basel II as an instrument for risk-weights. The relevance condition is satisfied since banks could implement the IRB approach only after their jurisdiction had implemented the the Basel II framework. The exclusion condition can be argued with the following three arguments: first, Basel II was established by an international committee, and the rules only available after it was published in June 2004. Second, jurisdictions adopted the rules at different times, reflecting different legislative procedures or other institutional differences. Third, although the use of IRB approach was conceptualized to be a choice of banks, it was still conditional on the approval of the supervisory authority and, in some jurisdictions, it was even imposed to large banks. Hence, we estimate the following two-stage fixed effect model:  

\begin{equation}
\label{eq:first2}
\text{RW}_{i,t} = \gamma\text{Basel II}_{c,t} +\phi X_{i,t}+\kappa Y_{c,t} +\alpha_{l}+\alpha_{i}+\varepsilon_{i,t}
\end{equation}



\begin{equation}
\label{eq:iv1}
\text{Log loan}_{l,i} = \beta\widehat{\text{RW}}_{i,t}+\phi X_{i,t}+\kappa Y_{c,t}+\alpha_{l}+\alpha_{i}+\varepsilon_{l,i,t}
\end{equation}

where $\text{Log loan}_{l,i}$ is the amount converted to USD lent by bank $i$ on syndicated loan $l$ and $\text{RW}_{i,t}$ is the risk-weight for the corporate portfolio of bank $i$ in year $t$. I match risk-weight at year $t$ to all facilities issued during the same year. $\alpha_{l}$ are syndicated loan fixed effects, which control for demand and other borrower characteristics, $\alpha_{i}$ are bank fixed effects to control for unobserved time-invariant bank characteristics and, $X_{i,t}$ and $Y_{c,t}$ are bank and country controls, respectively. $\text{Basel II}_{c,t}$ is a dummy variable that takes the value of 1 from the time Basel II was introduced in the home country of the parent bank. We cluster standard errors at the syndicated loan level. 


\section{Results} \label{sec:results}
This section presents the empirical analysis of the effect of risk-weights on lending. First, we present the main result that banks with lower average corporate risk-weights lend more. Next, we investigate if the effect is mostly driven by the time variation due to the introduction of the IRB approach or by the cross-sectional difference in risk-weights. Finally, we interact the coefficient on risk-weight with bank characteristics and measures of supervisory scrutiny to understand the mechanisms driving the effect on corporate lending.

\subsection{Risk-weights and bank lending} \label{sec:main}

Table \ref{tab:main} reports the results of estimating a model of the effect of corporate portfolio risk-weight on corporate lending with four specifications. In Column (1) we estimate the model by OLS with loan and bank fixed effects. Contrary to our hypothesis, the coefficient on the average corporate risk-weight is positive and statistically insignificant. We expect a negative effect, reflecting that banks that can apply lower risk-weights have a competitive advantage. However, risk-weights are likely to be endogenous. For instance, banks with a low risk-taking profile may benefit from this strategy with a greater capacity to lend. Although, the loan fixed effects included in all specifications controls for firm-level drivers, such as riskiness, there are potentially other confounding effects that could bias our estimates.

Columns (2) and (3) show, respectively, the first and second stages of our instrumental variable strategy using the time when the lender's country signed the Basel II accord as instrument. In section \ref{sec:method}, we explained the exogeneity assumption for the Basel II accord as it was published by an international committee, adopted by jurisdictions at different years, and the IRB approach was imposed to some of the banks. The first stage replicates the already known evidence that Basel II resulted in a significant reduction of risk-weights [@mariathasan2014manipulation; @behn2016limits]. In the case of the corporate portfolio, signing the Basel II accord decreases risk-weights by 28.2 percentage points on average. Column (2) reports that once endogeneity concerns are taken into account the impact of risk-weight on lending is negative and statistically significant as expected. The coefficient implies that a decrease of one standard deviation, or 26.9 percentage points, in risk-weights increases lending by 2.8%. To put the result in perspective, the average standard deviation of the loan amount within a syndication is \$15 millions or 27.2% of the average loan amount. Hence, the effect of risk-weight explain roughly 10% of the variation of lending across banks in a syndication. 

Our variable of interest, the average risk-weight, is a proxy for the actual capital charge on banks for the new lending. For the purpose of better proxying the actual risk-weights, we collect the average risk-weight from banks' corporate portfolio from their pillar-III reports. But the average risk-weight may still reflect other bank characteristics or the economic situation in their country that may also be the cause of their lending choices.  

The result that risk-weights are negatively associated to lending remains unaltered after including several control variables. We start by including two country level control variables, the real GDP growth rate and the policy rate, and four bank level variables, the logarithm of the total asset, the deposit ratio, the loans ratio, and the net interest income to operating income. The effect on lending of a one standard deviation change in risk-weight, implied by the coefficient in column (5), decreases to 2.4% relative to the 2.8% implied by column (3). The effect of risk-weight is only smaller than the effect of size (12.9%) and the loans ratio (4.4%). The coefficient is still statistically significant, albeit only at the 10% level. The inclusion of further controls - the ROA, the NPL ratio, and the capital ratio - increases fourfold the magnitude of the coefficient on risk-weight but removes the statistical significance. In Section \ref{sec:sheet}, we study if the effect of risk-weight is heterogeneous with respect to the variables included in column (6).

Interestingly, the adjusted $R^2$ remains virtually unchanged at 84.6% throughout the four regressions on loans volume. This suggests that most of the variation of lending comes from unobservable banks and borrowers characteristics. Notably, Table \ref{tab:fe} of the Appendix \ref{sec:appendixa} shows that the $R^2$ of a regression including only the risk-weight as regressor and loan fixed effect is 83.0%, highlighting the importance of exploring variation within a syndication to control for unobservable variables, such as, the borrower's credit demand.

Taken together, the results in Table \ref{tab:main} support the hypothesis banks with lower risk-weights can lend more. Next, we investigate if the effect is driven by the one time introduction of the IRB approach, which decreased risk-weights substantially, or by the differences in risk-weights across banks.

\subsection{IRB introduction and cross-bank risk-weight variation} \label{sec:time}

Column (1) in Table \ref{tab:time} reports that banks increase their lending to corporations after they start applying the IRB approach to calculate capital requirements. In this regression, we replace the average risk-weight of the corporate portfolio by a dummy variable that takes one for the years that the bank uses the IRB approach and zero otherwise. The model specification is equivalent to column (5) in Table \ref{tab:main}, i.e., we include bank and loan fixed effects, we instrument the IRB dummy with the Basel II dummy, and we include control variables except the ROA, the NPL ratio, and the capital ratio, which we discuss in the next section. The estimated coefficient implies that banks lend 4.4% more once they introduce the IRB approach in their corporate portfolio. This effect compares to the effect of a two standard deviations decrease in risk-weights implied by the coefficient in column (5) in Table \ref{tab:main}, i.e., an increase of 4.8% in lending. Therefore, the introduction of the IRB approach explains most of the impact of risk-weight on corporate lending, but not all of the effect; the difference between the effects implied by column (5) in Table \ref{tab:main} and column (1) in Table \ref{tab:time}, an increase of 0.4% in lending, can only be explained by changes in risk-weights under the IRB approach.

We investigate further the effect across banks that have already adopted the IRB approach in column (2). In this regression, we include only the observations that the average risk-weight is calculated using the IRB approach. This specification has two drawbacks. First, it more than halves our sample size. Second, and most importantly, we can no longer use the Basel II dummy as an instrument, because, by definition, there is no variation in this variable among banks under the IRB approach. Nevertheless, this specification still provides information on the effect of risk-weights on lending as it removes the initial impact of the IRB introduction. The estimated coefficient is negative and statistically significant at 1% level. The implied effect of a one standard deviation decrease in risk-weights is a 2.5% increase in corporate lending. To put the result in perspective, considering only banks using the IRB approach, the average standard deviation of the loan amount within a syndication is \$16.5 millions or 29.7% of the average loan amount for this group of banks. Hence, the effect of risk-weight explain roughly 8.4% of the variation of lending across banks using the IRB approach in a syndication. 

In column (3) we interact the risk-weight variable with dummies for the time since the introduction of the IRB approach. Since we have observation up to 12 years from the IRB introduction, we create four time dummies: for the first to the third years, for the fourth to the sixth years, for the seventh to the ninth years, and for the tenth to twelfth years. The coefficient on risk-weight is statistically different from zero in all periods. We do not observe any trend; none of the coefficients are statistically different from the coefficient estimated in column (2). 

To summarize, the evidence in Table \ref{tab:time} shows that most of the effect of risk-weights on corporate lending comes from comparing banks under the IRB approach with banks under the standardized approach. This is not surprising giving the immediate impact of the IRB introduction on risk-weights, as shown in Figures \ref{fig:alldata}, \ref{fig:irb_intro}, and \ref{fig:irb_var}. Table \ref{tab:time} also shows that variation of risk-weights across banks that have already introduced the IRB approach also affect corporate lending. In the following sections, we explore several potential mechanisms for why and how banks can use lower risk-weights to gain a competitive advantage in lending to corporations.

\subsection{Solvency and Risk-taking} \label{sec:sheet}

In this section, we study the effect of the interaction of the three variables included in column (6) of Table \ref{tab:main} with risk-weights on corporate lending. The objective is to check if these variables moderate the effect of risk-weight on lending and, therefore, uncovering the incentives and constrains for banks to take advantage of low risk-weights. 

Table \ref{tab:bank} reports the results when we interact, separately, the risk-weight variable with the ROA, the NPL ratio, and the risk-weighted capital ratio. In all regressions, the model specification is equivalent to column (5) in Table \ref{tab:main}, i.e., we include bank and loan fixed effects, we instrument the risk-weight variable with the Basel II dummy, and we include the other control variables. Column (1) shows that the coefficient on risk-weight and its interaction with ROA are negative and statistically significant. The result is consistent with profitable banks being more inclined to set lower risk-weights relative to their less profitable peers. We find in the literature tow possible mechanisms. First, higher profitability loosens bank borrowing constraints, enabling them to increase risk-taking [@martynova2020bank]. Second, profitable banks may accept the risk of being short in capital because they are willing to raise capital once requirements increase. Using UK regulatory data, @bahaj2017positive find that banks adjust to higher capital requirements by reducing lending when expected returns are low, but by raising capital when they are high.   

Column (2) shows that the coefficient on risk-weight remains negative while its interaction with the NPL ratio is positive. Both coefficients are statistically significant. The result corroborates the evidence from column (1) since banks with higher levels of NPL are likely to be less profitable. A high NPL ratio may also reflect different levels of risk-taking among banks. Banks holding riskier portfolios may be less inclined to underprice the risk-weights on their portfolio because they may already want to have a capital ratio above the regulatory minimum. Lastly, banks with higher NPL ratios may be under stricter scrutiny from their supervisors, reducing the possibility to manipulate risk-weights [@eisenbach2016economics].

The interpretation in the last paragraph suggests a important role of banks' capital position as a moderator of the effect of risk-weight on lending. For instance, according to @blum2008basel, the incentives to under-report portfolio risk are particularly strong among weakly capitalized banks. Columns (3) and (4) show that banks respond to changes in the capital ratio rather than to its level. In column (3), the coefficient on the capital ratio and its interaction with risk-weights are statistically insignificant. In column (4), the coefficient on the interaction between risk-weights and the change in the capital ratio is positive, suggesting that the incentive to use lower risk-weights to support lending is higher when capital ratios decrease.

\subsection{Size, Too big to fail, and Too big to save} \label{sec:tbtf}

In Table \ref{tab:size}, we study whether the size of banks can influence the effect of risk-weights on lending. Again, all regressions included bank and loan fixed effects and the control variables from column (5) in Table \ref{tab:main}, and we instrument the risk-weight variable with the Basel II dummy. Column (1) shows that the effect of risk-weight on lending is smaller for large banks. This result contradicts our expectation that large banks would have an incentive to be under-capitalized to explore the gains from their too-big-too-fail (TBTF) status. However, given the systemic risk from their failure, supervisors are more likely to exert higher effort to evaluate large banks risk models [@eisenbach2016economics]. Higher scrutiny translates in lower scope for banks to manipulate risk measures and, consequently, reducing the sensitivity of lending to risk-weights. 

The positive coefficient on the logarithm of the total assets in column (2) is consistent with the incentives associated to the TBTF status. Banks may want to increase their size to benefit from the implicit guarantee from governments associated to the TBTF status. The negative coefficient on the square of the logarithm of total assets suggests that the effect is decreasing at the margin, in line with banks perceiving the risk of reaching a TBTS status. However, neither the TBTF nor the TBTS status seem to influence the effect of risk-weights on lending. First, as in column (1), the coefficient on the interaction between risk-weights and the logarithm of the total assets is positive, contradicting the expectations in line with the TBTF motives. Second, the coefficient on the interaction between risk-weights and the square of the logarithm of the total assets is statistically insignificant

Following @demirgucc2013banks, we also include the ratio of banks total assets to their home country's GDP as a measure of systemic size and its interaction with risk-weights in column (3). The logarithm of the total assets maintains the positive sign in both regressions, in line with the TBTF status, while the ratio of assets to GDP gets a negative sign, possibly capturing the disincentives associated with the TBTS status. Moreover, the interaction term is statistically insignificant, corroborating the evidence in column (2) of no impact of the TBTS on the effect of risk-weights on lending. Column (4) shows that once we remove the logarithm of the total assets, both the linear and quadratic terms of the ratio of assets to GDP take the sign as in column (2), in other words, the first capture the effect of TBTF status and the second of TBTS on lending. However, differently from column (2) neither of the interaction terms in column (4) is statistically significant.  

Finally, in column (5) we include the logarithm of the total assets, the ratio of assets to GDP, the interaction term between them, and their interactions with risk-weights. Now, both the coefficients of the logarithm of the total assets and the ratio of assets to GDP are positive, suggesting the incentives associated with the TBTF status, while the interaction between them takes the negative sign associated with the TBTS status. More importantly, while the interaction of the logarithm of the total assets with risk-weights maintain the positive sign, as in columns (1) and (2), the interaction of the ratio of assets to GDP with risk-weights is negative and the triple interaction among the three variables is positive. All coefficients are statistically significant at the 1% level. Overall, the results of column (5) suggest both TBTF and TBTS status matter for how banks explore low risk-weights to increase lending. The results are also consistent with supervisors focusing on banks absolute size, instead of their systemic size, when deciding to allocate resources to validate banks' risk models.  

\subsection{Supervisory Scrutiny} \label{sec:supervision}

The analysis so far has suggested a particularly important role of the degree of supervision scrutiny. The strength of the effect of risk-weights on lending appears to depend on how much banks can manipulate their risk-weights.  Therefore, stronger supervision scrutiny should curtail banks from modeling credit risk opportunistically.  

We use three questions from the World Bank’s Bank Regulation and Supervision Survey to construct measures of the degree of supervisory scrutiny. First, the logarithm of the number of professional supervisors is our measure of supervision capacity. Second, the frequency of on-site inspections conducted in large and medium size banks is used to measure effort. Third, we use a dummy variable that takes one if the central bank is a supervisor. The effect of the central bank as supervisor is ambiguous. On the one hand, monetary policy and bank supervision could complement each other because information from each task can be more easily shared [@peek1999bank] and financial stability concerns can lead the central bank as supervisor to push for reduced risk-taking in the banking system [@altavilla2020banking]. On the other hand, @ioannidou2005does shows that when the Federal Reserve System tightens monetary policy, it becomes less strict in bank supervision, which suggests the existence of conflict in interest between the two tasks. To reduce the impact of reporting errors, for the first two measures, we use the average of the values from the last three rounds of the survey, and the most common value for the central bank as supervisor dummy variable. Therefore, we rely only on the variation across banks to identify the effect of supervision.        

The results in Table \ref{tab:sup} are based on our benchmark specification in column (5) of Table \ref{tab:main}, augmented with the supervision variables and their respective interaction terms with the risk-weight. In columns (1) and (2) the coefficient on the interaction term is positive, consistent with the hypothesis that stronger supervision scrutiny reduces the ability of banks to manipulate their risk-weights and, consequently reducing the capacity banks have to lend. This evidence corroborates @kandrac2019effect who find that banks increased their risk-taking following a reduction in supervision. Finally, the positive coefficient on the interaction term in column (3) suggests monetary policy and bank supervision tend to complement each other.    


\section{Conclusion and Discussion} \label{sec:conclusion}

In this paper, we estimate the effect of capital requirements on credit supply and investigate if strategic modeling explains the effect. Using the cross-border syndicated loan market, a hand-collected dataset on corporate risk-weights, and an instrumental variable strategy, we find that banks with lower risk-weights lend more. In our preferable specification, the estimation implies that a decrease of one standard deviation in risk-weights increases lending by 2.4%, explaining approximately 10% of the variation of lending across banks in the average syndication. 

The effect is stronger among small, and more profitable banks and weaker for banks with lower NPL ratios and for banks experiencing a fall in their capital ratios. We also find evidence that both too-big-too-fail and too-big-too-save status matter for how banks explore low risk-weights to increase lending, with the first reinforcing and the second mitigating the effect. The results are also consistent with supervisors focusing on banks absolute size, instead of their systemic size, when deciding to allocate resources to validate banks’ risk models. Overall, the estimated interactions suggest incentives that relies on the ability of banks to manipulate their risk models. We further test the strategic modeling hypothesis and find that higher supervisory scrutiny decreases the effect of risk-weight on lending. Taken together, the results suggest that, if allowed, banks manipulate risk-weights to gain an advantage in the corporate lending market.


\section*{References} 
\noindent
<div id="refs"></div>


\newpage 

# Figures {-}

```{r, results="hide"}
all_data <-  "\\label{fig:alldata}The figure plots the evolution in time of corporate portfolio risk-weights for every bank (grey lines) and the average corporate portfolio risk-weight (black line) in the sample."

```

```{r, message=FALSE, warning=FALSE, fig.cap = all_data, fig.align = 'center', fig.height = 3.5, fig.width = 4.5}
aux.data <- loan.data %>% 
  ungroup() %>%
  filter(bvdid %in% pillar3.data$bvdid,  between(year, 2001,2018), !is.na(lender_amount_musd)) %>% 
  distinct(bvdid, year, .keep_all = TRUE)%>%
  group_by(bvdid) %>%
  mutate(aux.year = sum(year))%>%
  filter(aux.year == sum(seq(2001,2018,1)))%>%
  arrange(bvdid, year) %>%
  mutate(change = IRB - lag(IRB),
         introduction_IRB = ifelse(lag(change) == 1, 1, change),
         post_IRB = ifelse(IRB == 1 & introduction_IRB == 0, 1, 0),
         pre_IRB  = ifelse(IRB == 1, 0, 1)) %>%
  group_by(bvdid, IRB) %>%
         mutate(RW.average = mean(RW, na.rm = TRUE),
                RW.aux = ifelse(IRB==1, RW[change==1], 1),
                RW.var = RW-RW.aux+1) 

aux  = ""
aux.data %>%
  ggplot(data = filter(aux.data, country_code_lender != aux ), mapping = aes(y = RW, x = year)) +
  geom_line(color = "gray70", aes(group = bank_name)) +
   stat_summary(fun=mean, aes(group=1), geom="line", colour="black", size = 1.1)+
  geom_line(data = filter(aux.data, country_code_lender == aux ), 
            color = "black", linetype = 2, size = 1, aes(group = bank_name))+
  
  theme_bw() +
#  scale_y_continuous(expand = c(0,0)) +
   scale_x_continuous(expand = c(0,0)) +
  theme(
    plot.background = element_blank(),
    panel.grid.major = element_blank(),
    panel.grid.minor = element_blank()
  ) +
  labs(x = "Year")

```




```{r, results="hide"}
rw_level_histogram <-  "\\label{fig:rwhistogram}The figure plots the histogram and the box-plot of the distribution of corporate portfolio risk-weights for all bank-year observations after banks have introduced the IRB approach."

```

```{r, warning=FALSE, message=FALSE, fig.cap = rw_level_histogram, fig.align = 'center', fig.height = 3.5, fig.width = 4.5}
plt1 <- aux.data %>%
  filter(bvdid %in% pillar3.data$bvdid,  between(year, 2001,2018), !is.na(lender_amount_musd), IRB == 1) %>% 
  ggplot( mapping = aes(x = RW)) +
  geom_histogram(fill="grey", color="black") +
  theme_bw()+
#scale_y_continuous(expand = c(0,0)) +
 #  scale_x_continuous(expand = c(0,0)) +
  theme(
    axis.title.y=element_blank(),
    axis.title.x=element_blank(),
    axis.text.x=element_blank(),
    axis.ticks.x=element_blank(),
    plot.background = element_blank(),
    panel.grid.major = element_blank(),
    panel.grid.minor = element_blank()
  )  

plt2 <- aux.data %>%
  filter(bvdid %in% pillar3.data$bvdid,  between(year, 2001,2018), !is.na(lender_amount_musd), IRB == 1) %>% 
  ggplot( mapping = aes(x = RW)) +
  geom_boxplot(fill="grey", color="black") +
  theme_classic()+
scale_y_continuous(expand = c(0.3,0)) +
 #  scale_x_continuous(expand = c(0,0)) +
  theme(axis.line.y = element_blank(),
    axis.title.y=element_blank(),
    axis.text.y=element_blank(),
    axis.ticks.y=element_blank(),
    plot.background = element_blank(),
    panel.grid.major = element_blank(),
    panel.grid.minor = element_blank()
  )  

numbers <- aux.data %>% ungroup()%>%
  filter(bvdid %in% pillar3.data$bvdid,  between(year, 2001,2018), !is.na(lender_amount_musd), IRB == 1) %>%
  summarise(RW = quantile(RW, c(0.25,0.75), na.rm = TRUE), probs= c(0.25,0.75), mean = mean(RW, na.rm = TRUE))

cowplot::plot_grid(plt1, plt2, 
                   ncol = 1, rel_heights = c(4, 1),
                   align = 'v', axis = 'lr') 
```

```{r, results="hide"}
var_between_within<-  "\\label{fig:betweenwithin}The figure plots the evolution in time of corporate portfolio risk-weights of Canadian banks (grey solid lines) and French banks (black dashed lines)."

```

```{r, warning=FALSE, message=FALSE, fig.cap = var_between_within, fig.align = 'center', fig.height = 3.5, fig.width = 4.5}
 loan.data %>% 
  filter(bvdid %in% pillar3.data$bvdid,  between(year, 2001, 2018), country_code_lender %in% c("FR", "CA")) %>% 
  distinct(bvdid, year, .keep_all = TRUE)%>%
  group_by(bvdid) %>%
  mutate(aux.year = sum(year))%>%
  filter(aux.year == sum(seq(2001,2018,1))) %>%
  ggplot(mapping = aes(y = RW, x = year, linetype = country_code_lender, color = country_code_lender,
                       group = interaction(country_code_lender, bank_name))) +
  geom_line()+
 theme_bw()+
  scale_color_manual(labels = c("Canada", "France"), values=c("gray50","black"))+
  scale_linetype_manual(labels = c("Canada", "France"), values=c("solid", "longdash"))+
#scale_y_continuous(expand = c(0,0)) +
   scale_x_continuous(expand = c(0,0)) +
  theme(
    legend.title = element_blank(),
    legend.background = element_blank(),
    legend.position = c(0.15,0.15),
    plot.background = element_blank(),
  #  panel.grid.major = element_blank(),
    panel.grid.minor = element_blank()
  ) 

```

```{r, results="hide"}
intro_by_year <-  "\\label{fig:introyear}The figure plots the distribution in time of the introduction of the IRB approach for corporate portfolios."

```

```{r, warning=FALSE, message=FALSE, fig.cap = intro_by_year, fig.align = 'center', fig.height = 3.5, fig.width = 4.5}

aux.data %>% 
  select(bvdid, bank_name, year, IRB, change) %>%
  filter(change == 1) %>%
   ggplot( mapping = aes(x = as.factor(year))) +
  geom_bar(fill="grey", color="black") +
  theme_bw()+
#scale_y_continuous(expand = c(0,0)) +
 #  scale_x_continuous(expand = c(0,0)) +
  theme(
    axis.title.y=element_blank(),
    plot.background = element_blank(),
    panel.grid.major = element_blank(),
    panel.grid.minor = element_blank()
  )  +
  labs(x = "Year")
```

```{r, results="hide"}
intro_within<-  "\\label{fig:introwithin}The figure plots the evolution in time of corporate portfolio risk-weights of Italian banks. "

```

```{r, warning=FALSE, message=FALSE, fig.cap = intro_within, fig.align = 'center', fig.height = 3.5, fig.width = 4.5}
 loan.data %>% 
  filter(bvdid %in% pillar3.data$bvdid,  between(year, 2001, 2018), country_code_lender %in% c("IT")) %>% 
  distinct(bvdid, year, .keep_all = TRUE)%>%
  group_by(bvdid) %>%
  mutate(aux.year = sum(year))%>%
  filter(aux.year == sum(seq(2001,2018,1))) %>%
  ggplot(mapping = aes(y = RW, x = year, linetype = bank_name, color = bank_name, 
                       group = interaction(country_code_lender, bank_name))) +
  geom_line(
   # size = 1
    )+
 theme_bw()+
  scale_color_grey(start = 0, end = 0.6)+
   scale_x_continuous(expand = c(0,0)) +
  theme(
    legend.title = element_blank(),
    legend.background = element_blank(),
    legend.position = c(0.22,0.27),
    plot.background = element_blank(),
  #  panel.grid.major = element_blank(),
    panel.grid.minor = element_blank()
  ) +
  labs(x = "Year")

```

```{r, results="hide"}
intro_between<-  "\\label{fig:introbetween}The figure plots the evolution in time of corporate portfolio risk-weights of German banks (grey solid lines) and American banks (black dashed lines)."

```

```{r, warning=FALSE, message=FALSE, fig.cap = intro_between, fig.align = 'center', fig.height = 3.5, fig.width = 4.5}

 loan.data %>% 
  filter(bvdid %in% pillar3.data$bvdid,  between(year, 2001, 2018), country_code_lender %in% c("US", "DE")) %>% 
  distinct(bvdid, year, .keep_all = TRUE)%>%
  group_by(bvdid) %>%
  mutate(aux.year = sum(year))%>%
  filter(aux.year == sum(seq(2001,2018,1))) %>%
  ggplot(mapping = aes(y = RW, x = year, linetype = country_code_lender, color = country_code_lender,
                       group = interaction(country_code_lender, bank_name))) +
  geom_line()+
 theme_bw()+
  scale_color_manual(labels = c("Germany", "United States"), values=c("gray50","black"))+
  scale_linetype_manual(labels = c("Germany", "United States"), values=c("solid", "longdash"))+
#scale_y_continuous(expand = c(0,0)) +
   scale_x_continuous(expand = c(0,0)) +
  theme(
    legend.title = element_blank(),
    legend.background = element_blank(),
    legend.position =  c(0.15,0.15),
    plot.background = element_blank(),
  #  panel.grid.major = element_blank(),
    panel.grid.minor = element_blank()
  ) +
  labs(x = "Year")

```


```{r, results="hide"}
irb_intro <-  "\\label{fig:irb_intro}The figure plots the impact on risk-weights of the IRB introduction for every bank (grey lines) and the average corporate portfolio risk-weight (black line) in the sample."

```

```{r, message=FALSE, warning=FALSE, fig.cap = irb_intro, fig.align = 'center', fig.height = 3.5, fig.width = 4.5}
aux  = ""
aux.data %>%
  ggplot(data = filter(aux.data, country_code_lender != aux ), mapping = aes(y = RW.aux, x = year)) +
  geom_line(color = "gray70", aes(group = bank_name)) +
   stat_summary(fun=mean, aes(group=1), geom="line", colour="black", size = 1.1)+
  geom_line(data = filter(aux.data, country_code_lender == aux ), 
            color = "black", linetype = 2, size = 1, aes(group = bank_name))+
  
  theme_bw() +
#  scale_y_continuous(expand = c(0,0)) +
   scale_x_continuous(expand = c(0,0)) +
  theme(
    plot.background = element_blank(),
    panel.grid.major = element_blank(),
    panel.grid.minor = element_blank()
  ) +
  labs(x = "Year", y= "RW")

```

```{r, results="hide"}
irb_var <-  "\\label{fig:irb_var}The figure plots the evolution in time of corporate portfolio risk-weights removing the initial impact of the IRB introduction for every bank (grey lines) and the average corporate portfolio risk-weight (black line) in the sample."

```

```{r, message=FALSE, warning=FALSE, fig.cap = irb_var, fig.align = 'center', fig.height = 3.5, fig.width = 4.5}
aux  = ""
aux.data %>%
  ggplot(data = filter(aux.data, country_code_lender != aux ), mapping = aes(y = RW.var, x = year)) +
  geom_line(color = "gray70", aes(group = bank_name)) +
   stat_summary(fun=mean, aes(group=1), geom="line", colour="black", size = 1.1)+
  geom_line(data = filter(aux.data, country_code_lender == aux ), 
            color = "black", linetype = 2, size = 1, aes(group = bank_name))+
  
  theme_bw() +
#  scale_y_continuous(expand = c(0,0)) +
   scale_x_continuous(expand = c(0,0)) +
  theme(
    plot.background = element_blank(),
    panel.grid.major = element_blank(),
    panel.grid.minor = element_blank()
  ) +
  labs(x = "Year", y= "RW")

```










```{r, results="hide"}
data_trend <-  "\\label{fig:trend}The figure plots the evolution in time of corporate portfolio risk-weights of Swiss banks (grey solid lines) and Swedish banks (black dashed lines)."

```
```{r, warning=FALSE, message=FALSE, fig.cap = data_trend, fig.align = 'center', fig.height = 3.5, fig.width = 4.5}
 loan.data %>% 
  filter(bvdid %in% pillar3.data$bvdid,  between(year, 2001, 2018), country_code_lender %in% c("CH", "SE")) %>% 
  distinct(bvdid, year, .keep_all = TRUE)%>%
  group_by(bvdid) %>%
  mutate(aux.year = sum(year))%>%
  filter(aux.year == sum(seq(2001,2018,1))) %>%
  ggplot(mapping = aes(y = RW, x = year, linetype = country_code_lender, color = country_code_lender,
                       group = interaction(country_code_lender, bank_name))) +
  geom_line()+
 theme_bw()+
  scale_color_manual(labels = c("Switzerland", "Sweden"), values=c("gray50","black"))+
  scale_linetype_manual(labels = c("Switzerland", "Sweden"), values=c("solid", "longdash"))+
#scale_y_continuous(expand = c(0,0)) +
   scale_x_continuous(expand = c(0,0)) +
  theme(
    legend.title = element_blank(),
    legend.background = element_blank(),
    legend.position =  c(0.15,0.15),
    plot.background = element_blank(),
  #  panel.grid.major = element_blank(),
    panel.grid.minor = element_blank()
  ) +
  labs(x = "Year")

```

```{r}
test <- loan.data %>%
        filter(year > 2000, country_name_borrower != country_name, IRB == 1)%>%
  select(lender_amount_musd, tranche_id)%>%
  group_by(tranche_id) %>%
  summarise(across(lender_amount_musd, list(mean = ~mean(.x, na.rm = TRUE), sd= ~sd(.x, na.rm = TRUE)))) %>%
  filter(!is.na(lender_amount_musd_sd))%>%
  ungroup()%>%
  summarise(across(is.numeric, ~mean(.x, na.rm = TRUE)))


test2 <- loan.data %>%
        filter(year > 2000, country_name_borrower != country_name, IRB == 1)%>%
  select(RW)%>%
  summarise(across(is.numeric, list(mean = ~mean(.x, na.rm = TRUE), sd= ~sd(.x, na.rm = TRUE))))
```

\newpage

# Tables {-}

\begin{table}[!htbp] \centering  
\caption{Summary Statistics}  
\label{tab:summary}
\footnotesize
\begin{tabular}{@{\extracolsep{1pt}}lccccc}
\multicolumn{6}{c}{\parbox[t]{15cm}{The table shows summary statistics for the sample used in the paper. Our data cover the 2001-2018 period. All bank and loan level variables are winsorized at 1\% and 99\%}} \\
\end{tabular}

```{r summary1, eval=TRUE, fig.height = 10, fig.width = 7, results="asis",out.width = "1\\textwidth"}
loan.data %>%
        filter(year > 2000, country_name_borrower != country_name) %>% 
  arrange(mean.RW_with_SA)%>%
  mutate(asset = totalassetsmillcu*exchangeratefromoriginalcurrencyusd/1000,
         number_supervisors = round(number_supervisors,0),
         log.number = log(number_supervisors))%>%
  select(
  lender_amount_musd,
  log.lender_amount,
  RW,
  IRB,
  basel,
  gdp_growth,
  policy_rate,
  asset,
  log.asset,
  deposit.ratio,
  loans.ratio,
  NII.ratio,
  ROA,
  NPL.ratio,
  capital.ratio,
  capital.ratio_gr,
  asset_share.gdp,
  number_supervisors,
  log.number,
  freq_onsite,
  cb_supervisor
  ) %>%
  #filter(across(where(is.numeric), ~ !is.na(.x))) %>%
  as.data.frame() %>% 
stargazer(header = FALSE, type="latex", single.row = TRUE, column.sep.width = "1pt", font.size = "footnotesize",
          label = "tab:summary",
          omit.summary.stat = c("p25","p75"),
          covariate.labels = 
            c("\\hspace{0.0cm}$\\text{Loan (USD MM)}_{l,i}$",
              "\\hspace{0.0cm}$\\text{Log loan}_{l,i}$",
              "\\hspace{0.0cm}$\\text{RW}_{i,t}$",
              "\\hspace{0.0cm}$\\text{IRB}_{i,t}$",
              "\\hspace{0.0cm}$\\text{Basel II}_{c,t}$",
              "\\hspace{0.0cm}$\\text{GDP growth rate}_{c,t}$",
              "\\hspace{0.0cm}$\\text{Policy rate}_{c,t}$",
              "\\hspace{0.0cm}$\\text{Total assets (USD B)}_{i,t}$",
              "\\hspace{0.0cm}$\\text{Log assets}_{i,t}$",
              "\\hspace{0.0cm}$\\text{Deposit ratio}_{i,t}$",
              "\\hspace{0.0cm}$\\text{Loans ratio}_{i,t}$",
              "\\hspace{0.0cm}$\\text{NII ratio}_{i,t}$",
              "\\hspace{0.0cm}$\\text{ROA}_{i,t}$",
              "\\hspace{0.0cm}$\\text{NPL ratio}_{i,t}$",
              "\\hspace{0.0cm}$\\text{Capital ratio}_{i,t}$",
              "\\hspace{0.0cm}$\\Delta \\text{Capital ratio}_{i,t}$",
              "\\hspace{0.0cm}$\\text{Assets to GDP}_{c,t}$",
              "\\hspace{0.0cm}$\\text{Number of professional supervisors}_{c,t}$",
              "\\hspace{0.0cm}$\\text{Log number of professional supervisors}_{c,t}$",
              "\\hspace{0.0cm}$\\text{Frequency of onsite inspections}_{c,t}$",
              "\\hspace{0.0cm}$\\text{Central bank supervisor}_{c,t}$"
              ),
          notes.label = "",
          notes.align = "c", 
          notes.append = FALSE,
          summary = TRUE,
          digits = 3,
          align = TRUE,
          float = FALSE)

``` 

\end{table}



```{r benchmark_regressions, echo=FALSE}
# Run the models
reg.list <- list()
se.list <- list()
F.test <- c()

reg.list[[1]] <- felm(log.lender_amount ~ RW 
                      | as.factor(bvdid) + tranche_id  | 0 | tranche_id,
                      data = filter(loan.data, country_name_borrower != country_name, year > 2000))

reg.list[[3]] <- felm(log.lender_amount ~  1
                      | as.factor(bvdid) +  tranche_id | (RW ~ basel) | tranche_id,
                      data = filter(loan.data, country_name_borrower != country_name, year > 2000))
rownames(reg.list[[3]]$coefficients)[rownames(reg.list[[3]]$coefficients)=='`RW(fit)`']<-'RW'
rownames(reg.list[[3]]$beta)[rownames(reg.list[[3]]$beta)=='`RW(fit)`']<-'RW'

reg.list[[2]] <- reg.list[[3]]$stage1
F.test[2]<-round(summary(reg.list[[2]])$iv1fstat["F"],1)


reg.list[[5]] <- felm(log.lender_amount ~  +gdp_growth+policy_rate+log.asset  +  deposit.ratio + loans.ratio + NII.ratio 
                      | as.factor(bvdid) +  tranche_id | (RW ~ basel) | tranche_id,
                      data = filter(loan.data, country_name_borrower != country_name, year > 2000))
rownames(reg.list[[5]]$coefficients)[rownames(reg.list[[5]]$coefficients)=='`RW(fit)`']<-'RW'
rownames(reg.list[[5]]$beta)[rownames(reg.list[[5]]$beta)=='`RW(fit)`']<-'RW'

reg.list[[4]] <- reg.list[[5]]$stage1
F.test[4]<-round(summary(reg.list[[4]])$iv1fstat["F"],1)

reg.list[[6]] <- felm(log.lender_amount ~  +gdp_growth+policy_rate+log.asset  +  deposit.ratio + loans.ratio + NII.ratio + ROA + NPL.ratio + capital.ratio
                      | as.factor(bvdid) +  tranche_id | (RW ~ basel) | tranche_id,
                      data = filter(loan.data, country_name_borrower != country_name, year > 2000))
rownames(reg.list[[6]]$coefficients)[rownames(reg.list[[6]]$coefficients)=='`RW(fit)`']<-'RW'
rownames(reg.list[[6]]$beta)[rownames(reg.list[[6]]$beta)=='`RW(fit)`']<-'RW'

```


```{r benchmark_aux, echo=FALSE}

# Dependent variables
dep.text <- c("$\\text{Log loan}_{l,i}$","$\\text{RW}_{i,t}$", "$\\text{Log loan}_{l,i}$","$\\text{RW}_{i,t}$", "$\\text{Log loan}_{l,i}$","$\\text{RW}_{i,t}$", "$\\text{Log loan}_{l,i}$")

# Independent variables
ind.text <- c("$\\text{RW}_{i,t}$", 
              "$\\text{Basel II}_{c,t}$",
              "$\\text{GDP growth rate}_{c,t}$", 
              "$\\text{Policy rate}_{c,t}$",
              "$\\text{Log asset}_{i,t}$",
              "$\\text{Deposit ratio}_{i,t}$",
              "$\\text{Loans ratio}_{i,t}$",
              "$\\text{Net interest income}_{i,t}$",
              "$\\text{ROA}_{i,t}$",
              "$\\text{NPL ratio}_{i,t}$",
              "$\\text{Capital ratio}_{i,t}$")

fe.list <- list(c("Loan FE",    rep("\\multicolumn{1}{c}{Yes}", length(reg.list))),
                c("Bank FE",    rep("\\multicolumn{1}{c}{Yes}", length(reg.list))),
                c("F-value (1st stage)",    F.test))

```


```{r benchmark_table, eval=TRUE, echo=FALSE, results='asis', warning=FALSE, message=FALSE}
stargazer(reg.list,
          title = "Risk-weights and Corporate Lending",
          table.layout = "n=c=d#-t-as-",
          notes = "\\parbox[t]{16cm}{The table shows the effect of risk-weights on cross-border corporate lending. The dependent variable is the logarithm of the amount lent by the bank in a syndicated loan. The main independent variable, $\\text{RW}_{i,t}$, is the average risk-weight of the bank's corporate portfolio in the year that the loan was issued. The instrumental variable, $\\text{Basel II}_{c,t}$, is a dummy variable that takes the value of one for the years since the introduction of the Basel II accord in the home country of the lender. $\\text{GDP growth rate}_{c,t}$ is the real GDP annual growth rate for the lender's home country. $\\text{Policy rate}_{c,t}$ is the policy rate of the lender's home country. $\\text{Log assets}_{i,t}$ is the natural logarithm of the dollar amount of a bank's total asset. $\\text{Deposit ratio}_{i,t}$ is the ratio of total customer deposits to total asset. $\\text{Loans ratio}_{i,t}$ is the ratio of gross loans to total assets. $\\text{Net interest income}_{i,t}$ is the ratio of net interest income to operating income. $\\text{ROA}_{i,t}$ is the ratio of pre-tax income to total assets. $\\text{NPL ratio}_{i,t}$ is the ratio of non-performing loans to gross loans. $\\text{Capital ratio}_{i,t}$ is the ratio of regulatory capital to risk-weighted assets. All regressions include loan and bank fixed effects. Clustered standard errors at the loan level are reported in parentheses. *, **, and *** indicate statistical significance at the 10\\%, 5\\%, and 1\\% level respectively.}",
          dep.var.labels   = dep.text,
          covariate.labels = ind.text,
          order           = c(1, 8, seq(2,7)),
          add.lines        = fe.list,
          #se               = se.list,
          keep.stat        = c("n","adj.rsq"),
          header           = FALSE, 
          font.size        = "scriptsize",
          notes.label      = "",
          notes.align      = "c", 
          notes.append     = FALSE,
          label            = "tab:main",
          style            = "qje",
          column.sep.width = "-1.0pt",
          align            = TRUE,
          #no.space        = TRUE,
          column.labels    = c("OLS", "IV 1", "IV 2", "IV 3" ),
          column.separate  = c(1,2,2),
          #float.env        = "sidewaystable",
          type             = "latex"
  )
```


```{r time_regressions, echo=FALSE}
  aux <-  select(IRB.indicator, bvdid = bvdid_new, year, IRB)%>%
  group_by(bvdid)%>% 
  arrange(bvdid, year) %>%
  mutate(intro_IRB    = ifelse(IRB==1 & lag(IRB) == 0, 1,0),
         intro_IRB    = ifelse(intro_IRB==0 & lag(intro_IRB) == 1, 1,intro_IRB),
         intro_IRB     = ifelse(intro_IRB ==0 & lag(intro_IRB ) == 1, 1,intro_IRB),
         second_IRB   = ifelse(intro_IRB==0 & lag(intro_IRB) == 1, 1,0),
        second_IRB    = ifelse(second_IRB==0 & lag(second_IRB) == 1, 1,second_IRB),
         second_IRB    = ifelse(second_IRB==0 & lag(second_IRB) == 1, 1,second_IRB),
         third_IRB  = ifelse(second_IRB==0 & lag(second_IRB) == 1, 1,0),
         third_IRB   = ifelse(third_IRB==0 & lag(third_IRB) == 1, 1,third_IRB ),
         third_IRB    = ifelse(third_IRB==0 & lag(third_IRB) == 1, 1,third_IRB ),
         fourth_IRB    = ifelse(third_IRB==0 & lag(third_IRB) == 1, 1,0),
         fourth_IRB = ifelse(fourth_IRB==0 & lag(fourth_IRB) == 1, 1,fourth_IRB),
         fourth_IRB = ifelse(fourth_IRB==0 & lag(fourth_IRB) == 1, 1,fourth_IRB))%>%
  full_join(select(loan.data, -IRB), by = c("bvdid", "year")) %>%
  filter(country_name_borrower != country_name, year > 2000, IRB == 1) %>%
  select(log.lender_amount, RW, gdp_growth, policy_rate, log.asset, deposit.ratio, loans.ratio, NII.ratio,
         contains("_IRB"), bvdid, year, IRB, tranche_id , basel, ROA, NPL.ratio) %>%
  mutate(aux1 = RW*intro_IRB,
         aux2 = RW*second_IRB,
         aux3 = RW*third_IRB,
         aux4 = RW*fourth_IRB,
         #aux5 = RW*fifth_IRB,
         #aux6 = RW*sixth_IRB,
         #aux7 = RW*seventh_IRB,
         #aux8 = RW*eighth_IRB,
         #aux9 = RW*ninth_IRB,
         #aux10 = RW*tenth_IRB,
         #aux11 = RW*eleventh_IRB,
         #aux12 = RW*twelveth_IRB,
         help1 = basel*intro_IRB,
         help2 = basel*second_IRB,
         help3 = basel*third_IRB,
         help4 = basel*fourth_IRB
         #help5 = basel*fifth_IRB,
         #help6 = basel*sixth_IRB,
         #help7 = basel*seventh_IRB,
         #help8 = basel*eighth_IRB,
         #help9 = basel*ninth_IRB,
         #help10 = basel*tenth_IRB,
         #help11 = basel*eleventh_IRB,
         #help12 = basel*twelveth_IRB
         )
  
# Run the models
reg.list <- list()
se.list <- list()
F.test <- c()

reg.list[[1]] <-felm(log.lender_amount ~  gdp_growth+policy_rate+log.asset  +  deposit.ratio + loans.ratio + NII.ratio 
                      | as.factor(bvdid) + tranche_id   | (IRB ~ basel)| tranche_id,
                      data = filter(loan.data, country_name_borrower != country_name, year > 2000))


reg.list[[2]] <-felm(log.lender_amount ~  RW+gdp_growth+policy_rate+log.asset  +  deposit.ratio + loans.ratio + NII.ratio 
                      | as.factor(bvdid) + tranche_id   | 0 | tranche_id,
                      data = filter(loan.data, country_name_borrower != country_name, year > 2000, IRB == 1))



reg.list[[3]] <- felm(log.lender_amount ~ aux1 + aux2 +aux3 + aux4+
                        gdp_growth + policy_rate + log.asset+ deposit.ratio + loans.ratio + NII.ratio  
                      | as.factor(bvdid)  + tranche_id  |
                  0 
                  | tranche_id,
                      data = aux)


```


```{r time_aux, echo=FALSE}

# Dependent variables
dep.text <- c("$\\text{Log loan}_{l,i}$","$\\text{RW}_{i,t}$", "$\\text{Log loan}_{l,i}$","$\\text{RW}_{i,t}$", "$\\text{Log loan}_{l,i}$","$\\text{RW}_{i,t}$", "$\\text{Log loan}_{l,i}$")

# Independent variables
ind.text <- c("$\\text{IRB}_{i,t}$",
              "$\\text{RW}_{i,t}$", 
              "$1^{st} \\: \\text{to} \\: 3^{rd} \\: \\text{year with IRB}_{i,t}\\times \\text{RW}_{i,t}$",
              "$4^{th}\\: \\text{to} \\: 6^{th} \\: \\text{year with IRB}_{i,t}\\times \\text{RW}_{i,t}$",
              "$7^{th} \\: \\text{to}\\: 9^{th}\\: \\text{year with IRB}_{i,t}\\times \\text{RW}_{i,t}$",
              "$10^{th}\\: \\text{to} \\: 12^{th}  \\: \\text{year with IRB}_{i,t}\\times \\text{RW}_{i,t}$",
              "$\\text{GDP growth rate}_{c,t}$", 
              "$\\text{Policy rate}_{c,t}$",
              "$\\text{Log asset}_{i,t}$",
              "$\\text{Deposit ratio}_{i,t}$",
              "$\\text{Loans ratio}_{i,t}$",
              "$\\text{Net interest income}_{i,t}$")

fe.list <- list(c("Loan FE",    rep("\\multicolumn{1}{c}{Yes}", length(reg.list))),
                c("Bank FE",    rep("\\multicolumn{1}{c}{Yes}", length(reg.list))))

```

```{r time_table, eval=TRUE, echo=FALSE, results='asis', warning=FALSE, message=FALSE}
stargazer(reg.list,
          title = "IRB Introduction vs Risk-weight variation across banks",
          table.layout = "n=c=d#-t-as-",
          notes = "\\parbox[t]{12cm}{The table shows the effect on cross-border corporate lending of the introduction of the IRB approach and of risk-weights once the IRB was introduced. The dependent variable is the logarithm of the amount lent by the bank in a syndicated loan. The main independent variable, $\\text{RW}_{i,t}$ is the average risk-weight of the bank's corporate portfolio in the year that the loan was issued. $\\text{IRB}_{i,t}$ is a dummy variable that takes the value of one for the years since the introduction of the IRB approach. Regression (1) is instrumented using $\\text{Basel II}_{c,t}$, which is a dummy variable that takes the value of one for the years since the introduction of the Basel II accord in the home country of the lender. $\\text{GDP growth rate}_{c,t}$ is the real GDP annual growth rate for the lender's home country. $\\text{Policy rate}_{c,t}$ is the policy rate of the lender's home country. $\\text{Log assets}_{i,t}$ is the natural logarithm of the dollar amount of a bank's total asset. $\\text{Deposit ratio}_{i,t}$ is the ratio of total customer deposits to total asset. $\\text{Loans ratio}_{i,t}$ is the ratio of gross loans to total assets. $\\text{Net interest income}_{i,t}$ is the ratio of net interest income to operating income. All regressions include loan and bank fixed effects. Clustered standard errors at the loan level are reported in parentheses. *, **, and *** indicate statistical significance at the 10\\%, 5\\%, and 1\\% level respectively.}",
          dep.var.labels   = dep.text,
          covariate.labels = ind.text,
          order           = c(12, seq(1,11)),
          add.lines        = fe.list,
          #se               = se.list,
          keep.stat        = c("n","adj.rsq"),
          header           = FALSE, 
          font.size        = "scriptsize",
          notes.label      = "",
          notes.align      = "c", 
          notes.append     = FALSE,
          label            = "tab:time",
          style            = "qje",
          column.sep.width = "-1.0pt",
          align            = TRUE,
          #no.space        = TRUE,
          #column.labels    = c("IRB banks", "IRB dummy", "IV 2", "IV 3" ),
          #column.separate  = c(1,2,2),
          #float.env        = "sidewaystable",
          type             = "latex"
  )
```


```{r bank_regressions, echo=FALSE}

# Run the models
reg.list <- list()
se.list <- list()
F.test.RW <- c()
F.test.aux <- c()


reg.list[[1]] <- felm(log.lender_amount ~  gdp_growth + policy_rate + log.asset+ deposit.ratio +
                        loans.ratio + NII.ratio+ ROA  
                      | as.factor(bvdid)  + tranche_id  |(RW | aux ~basel + basel:ROA) | tranche_id,
                      data = filter(mutate(loan.data,       
                                    ROA = ROA - mean(ROA, na.rm = TRUE),
                                    RW = RW - mean(RW, na.rm = TRUE),
                                    aux = RW*ROA), 
                                    country_name_borrower != country_name, year > 2000))
F.test.RW[1]<-round(reg.list[[1]]$stage1$iv1fstat$RW["F"],1)
F.test.aux[1]<-round(reg.list[[1]]$stage1$iv1fstat$aux["F"],1)

reg.list[[2]] <- felm(log.lender_amount ~   gdp_growth + policy_rate + log.asset+ deposit.ratio +
                        loans.ratio + NII.ratio +NPL.ratio 
                      | as.factor(bvdid)  + tranche_id  |(RW | aux2 ~basel + basel:NPL.ratio) | tranche_id,
                      data = filter(mutate(loan.data,       
                                    NPL.ratio = NPL.ratio - mean(NPL.ratio, na.rm = TRUE),
                                    RW = RW - mean(RW, na.rm = TRUE),
                                    aux2 = RW*NPL.ratio), 
                                    country_name_borrower != country_name, year > 2000))
F.test.RW[2]<-round(reg.list[[2]]$stage1$iv1fstat$RW["F"],1)
F.test.aux[2]<-round(reg.list[[2]]$stage1$iv1fstat$aux2["F"],1)

reg.list[[3]] <- felm(log.lender_amount ~   gdp_growth + policy_rate + log.asset+ deposit.ratio +
                        loans.ratio + NII.ratio +capital.ratio
                      | as.factor(bvdid)  + tranche_id  |(RW | aux3 ~basel + basel:capital.ratio) | tranche_id,
                      data = filter(mutate(loan.data,       
                                    capital.ratio = capital.ratio - mean(capital.ratio, na.rm = TRUE),
                                    RW = RW - mean(RW, na.rm = TRUE),
                                    aux3 = RW*capital.ratio), 
                                    country_name_borrower != country_name, year > 2000))
F.test.RW[3]<-round(reg.list[[3]]$stage1$iv1fstat$RW["F"],1)
F.test.aux[3]<-round(reg.list[[3]]$stage1$iv1fstat$aux3["F"],1)


reg.list[[4]] <- felm(log.lender_amount ~   gdp_growth + policy_rate + log.asset+ deposit.ratio +
                        loans.ratio + NII.ratio +capital.ratio_gr
                      | as.factor(bvdid)  + tranche_id  |(RW | aux4 ~basel + basel:capital.ratio_gr) | tranche_id,
                      data = filter(mutate(loan.data,       
                                    #capital.ratio = capital.ratio - mean(capital.ratio, na.rm = TRUE),
                                    RW = RW - mean(RW, na.rm = TRUE),
                                    aux4 = RW*capital.ratio_gr), 
                                    country_name_borrower != country_name, year > 2000))
F.test.RW[4]<-round(reg.list[[4]]$stage1$iv1fstat$RW["F"],1)
F.test.aux[4]<-round(reg.list[[4]]$stage1$iv1fstat$aux4["F"],1)



```


```{r bank_aux, echo=FALSE}

# Dependent variables
dep.text <- c("$\\text{Log loan}_{l,i}$","$\\text{RW}_{i,t}$", "$\\text{Log loan}_{l,i}$","$\\text{RW}_{i,t}$", "$\\text{Log loan}_{l,i}$","$\\text{RW}_{i,t}$", "$\\text{Log loan}_{l,i}$")

# Independent variables
ind.text <- c(  "$\\text{RW}_{i,t}$", 
                "$\\text{ROA}_{i,t}$", "$\\text{RW}_{i,t} \\times \\text{ROA}_{i,t}$",
                "$\\text{NPL ratio}_{i,t}$", "$\\text{RW}_{i,t} \\times \\text{NPL ratio}_{i,t}$",
                "$\\text{Capital ratio}_{i,t}$", "$\\text{RW}_{i,t} \\times \\text{Capital ratio}_{i,t}$",
                "$\\Delta\\text{Capital ratio}_{i,t}$", "$\\text{RW}_{i,t} \\times \\Delta\\text{Capital ratio}_{i,t}$",
                "$\\text{GDP growth rate}_{c,t}$", 
                "$\\text{Policy rate}_{c,t}$",
                "$\\text{Log asset}_{i,t}$",
                "$\\text{Deposit ratio}_{i,t}$",
                "$\\text{Loans ratio}_{i,t}$",
                "$\\text{Net interest income}_{i,t}$")

fe.list <- list(c("Loan FE",    rep("\\multicolumn{1}{c}{Yes}", length(reg.list))),
                c("Bank FE",    rep("\\multicolumn{1}{c}{Yes}", length(reg.list))),
                c("F-value (1st stage on RW)", F.test.RW))

```

```{r bank_table, eval=TRUE, echo=FALSE, results='asis', warning=FALSE, message=FALSE}
stargazer(reg.list,
          title = "Performance, Risk-weights and Lending",
          table.layout = "n=c=d#-t-as-",
          notes = "\\parbox[t]{13cm}{The table shows the interaction between the effect of risk-weights and the effect of bank characteristics on cross-border corporate lending. The dependent variable is the logarithm of the amount lent by the bank in a syndicated loan. The main independent variable, $\\text{RW}_{i,t}$, is the average risk-weight of the bank's corporate portfolio in the year that the loan was issued. In all regressions $\\text{RW}_{i,t}$ is instrumented using $\\text{Basel II}_{c,t}$, which is a dummy variable that takes the value of one for the years since the introduction of the Basel II accord in the home country of the lender. $\\text{GDP growth rate}_{c,t}$ is the real GDP annual growth rate for the lender's home country. $\\text{Policy rate}_{c,t}$ is the policy rate of the lender's home country. $\\text{Log assets}_{i,t}$ is the natural logarithm of the dollar amount of a bank's total asset. $\\text{Deposit ratio}_{i,t}$ is the ratio of total customer deposits to total asset. $\\text{Loans ratio}_{i,t}$ is the ratio of gross loans to total assets. $\\text{Net interest income}_{i,t}$ is the ratio of net interest income to operating income. $\\text{ROA}_{i,t}$ is the ratio of pre-tax income to total assets. $\\text{NPL ratio}_{i,t}$ is the ratio of non-performing loans to gross loans. $\\text{Capital ratio}_{i,t}$ and $\\Delta \\text{Capital ratio}_{i,t}$ are the level and yearly change, respectively, of ratio of regulatory capital to risk-weighted assets. All regressions include loan and bank fixed effects. Clustered standard errors at the loan level are reported in parentheses. *, **, and *** indicate statistical significance at the 10\\%, 5\\%, and 1\\% level respectively.}",
          dep.var.labels   = dep.text,
          covariate.labels = ind.text,
          #keep             = seq(7,11),
          order            = c(11,7,12,8,13, 9, 14,10,15),
          add.lines        = fe.list,
          #se               = se.list,
          keep.stat        = c("n","adj.rsq"),
          header           = FALSE, 
          font.size        = "scriptsize",
          notes.label      = "",
          notes.align      = "c", 
          notes.append     = FALSE,
          label            = "tab:bank",
          style            = "qje",
          column.sep.width = "-1.0pt",
          align            = TRUE,
          #no.space        = TRUE,
          #column.labels    = c("OLS", "IV 1", "IV 2", "IV 3"),
          #column.separate  = c(1,1,1,1),
          #float.env        = "sidewaystable",
          type             = "latex"
  )
```



```{r size_regressions, echo=FALSE}

# Run the models
reg.list <- list()
se.list <- list()
F.test.RW <- c()
F.test.aux1 <- c()
F.test.aux2 <- c()
F.test.aux3 <- c()

reg.list[[1]] <- felm(log.lender_amount ~ log.asset 
                      + gdp_growth + policy_rate  + deposit.ratio + loans.ratio + NII.ratio 
                      | as.factor(bvdid)  + tranche_id  | 
                        (RW | aux1 ~ basel + basel:log.asset) | tranche_id,
                      data = filter(mutate(loan.data,      
                                    log.asset = log.asset - mean(log.asset, na.rm = TRUE),
                                    RW = RW - mean(RW, na.rm = TRUE),
                                    aux1 = RW*log.asset), 
                                    country_name_borrower != country_name, year > 2000))

F.test.RW[1]<-round(reg.list[[1]]$stage1$iv1fstat$RW["F"],1)
F.test.aux1[1]<-round(reg.list[[1]]$stage1$iv1fstat$aux1["F"],1)


reg.list[[2]] <- felm(log.lender_amount ~ log.asset 
                      + gdp_growth + policy_rate+ deposit.ratio + loans.ratio + NII.ratio + log.asset_sq  
                      | as.factor(bvdid)  + tranche_id  
                      | (RW | aux1 | aux2 ~  basel  + basel:log.asset + basel:log.asset_sq ) 
                      | tranche_id,
                      data = filter(mutate(loan.data,        
                                    log.asset = log.asset - mean(log.asset, na.rm = TRUE),
                                    log.asset_sq = log.asset^2 - mean(log.asset^2, na.rm = TRUE),
                                    RW = RW - mean(RW, na.rm = TRUE),
                                    aux1 = RW*log.asset,
                                    aux2 = RW*log.asset_sq), 
                                    country_name_borrower != country_name, year > 2000))
F.test.RW[2]<-round(reg.list[[2]]$stage1$iv1fstat$RW["F"],1)
F.test.aux1[2]<-round(reg.list[[2]]$stage1$iv1fstat$aux1["F"],1)
F.test.aux2[2]<-round(reg.list[[2]]$stage1$iv1fstat$aux2["F"],1)


reg.list[[3]] <- felm(log.lender_amount ~ log.asset 
                      + gdp_growth + policy_rate+ deposit.ratio + loans.ratio + NII.ratio +  asset_share.gdp
                      | as.factor(bvdid)  + tranche_id  
                      |(RW | aux3 ~ basel + basel:asset_share.gdp) 
                      | tranche_id,
                      data = filter(mutate(loan.data,
                                    asset_share.gdp = asset_share.gdp - mean(asset_share.gdp, na.rm = TRUE),
                                    RW = RW - mean(RW, na.rm = TRUE),
                                    aux3 = RW*asset_share.gdp), 
                                    country_name_borrower != country_name, year > 2000))
F.test.RW[3]<-round(reg.list[[3]]$stage1$iv1fstat$RW["F"],1)
F.test.aux1[3]<-round(reg.list[[3]]$stage1$iv1fstat$aux3["F"],1)

reg.list[[4]] <- felm(log.lender_amount ~  gdp_growth + policy_rate+ deposit.ratio + loans.ratio + NII.ratio + asset_share.gdp+ asset_share.gdp_sq  
                      | as.factor(bvdid)  + tranche_id  
                      | (RW | aux3 | aux4 ~  basel  + basel:asset_share.gdp + basel:asset_share.gdp_sq ) 
                      | tranche_id,
                      data = filter(mutate(loan.data,        
                                    asset_share.gdp = asset_share.gdp - mean(asset_share.gdp, na.rm = TRUE),
                                    asset_share.gdp_sq = asset_share.gdp^2 - mean(asset_share.gdp^2, na.rm = TRUE),
                                    RW = RW - mean(RW, na.rm = TRUE),
                                    aux3 = RW*asset_share.gdp,
                                    aux4 = RW*asset_share.gdp_sq), 
                                    country_name_borrower != country_name, year > 2000))
F.test.RW[4]<-round(reg.list[[4]]$stage1$iv1fstat$RW["F"],1)
F.test.aux1[4]<-round(reg.list[[4]]$stage1$iv1fstat$aux3["F"],1)
F.test.aux2[4]<-round(reg.list[[4]]$stage1$iv1fstat$aux4["F"],1)

reg.list[[5]] <- felm(log.lender_amount ~ log.asset 
                      + gdp_growth + policy_rate + deposit.ratio + loans.ratio + NII.ratio + asset_share.gdp + log.asset:asset_share.gdp| as.factor(bvdid)  + tranche_id  | 
                        (RW | aux1 | aux3 | aux5 ~  basel 
                                                 + basel:log.asset + basel:asset_share.gdp +
                                                 + basel:log.asset:asset_share.gdp) | tranche_id,
                      data = filter(mutate(loan.data,      
                                    log.asset = log.asset - mean(log.asset, na.rm = TRUE),
                                    asset_share.gdp = asset_share.gdp - mean(asset_share.gdp, na.rm = TRUE),
                                    RW = RW - mean(RW, na.rm = TRUE),
                                    aux1 = RW*log.asset,
                                    aux3 = RW*asset_share.gdp,
                                    aux5 = RW*log.asset*asset_share.gdp), 
                                    country_name_borrower != country_name, year > 2000))
F.test.RW[5]<-round(reg.list[[5]]$stage1$iv1fstat$RW["F"],1)
F.test.aux1[5]<-round(reg.list[[5]]$stage1$iv1fstat$aux1["F"],1)
F.test.aux2[5]<-round(reg.list[[5]]$stage1$iv1fstat$aux3["F"],1)
F.test.aux3[5]<-round(reg.list[[5]]$stage1$iv1fstat$aux5["F"],1)

```


```{r size_aux, echo=FALSE}

# Dependent variables
dep.text <- c("$\\text{Log loan}_{l,i}$","$\\text{RW}_{i,t}$", "$\\text{Log loan}_{l,i}$","$\\text{RW}_{i,t}$", "$\\text{Log loan}_{l,i}$","$\\text{RW}_{i,t}$", "$\\text{Log loan}_{l,i}$")

# Independent variables
ind.text <- c( "$\\text{Log assets}_{i,t}$", "$(\\text{Log assets}_{i,t})^2$", "$\\text{Assets to GDP}_{i,t}$", "($\\text{Assets to GDP}_{i,t})^2$", "$\\text{Log assets}_{i,t} \\times \\text{Assets to GDP}_{i,t}$", "$\\text{RW}_{i,t}$", "$\\text{RW}_{i,t} \\times \\text{Log assets}_{i,t}$","$\\text{RW}_{i,t} \\times (\\text{Log assets}_{i,t})^2$", "$\\text{RW}_{i,t} \\times \\text{Assets to GDP}_{i,t}$", "$\\text{RW}_{i,t} \\times (\\text{Assets to GDP}_{i,t})^2$","$\\text{RW}_{i,t} \\times \\text{Log assets}_{i,t} \\times \\text{Assets to GDP}_{i,t}$")

fe.list <- list(c("Controls",    rep("\\multicolumn{1}{c}{Yes}", length(reg.list))),
                c("Loan FE",    rep("\\multicolumn{1}{c}{Yes}", length(reg.list))),
                c("Bank FE",    rep("\\multicolumn{1}{c}{Yes}", length(reg.list))),
                c("F-value (1st stage on RW)", F.test.RW))

```

```{r size_table, eval=TRUE, echo=FALSE, results='asis', warning=FALSE, message=FALSE}
stargazer(reg.list,
          title = "Size, Risk-weights and Lending",
          table.layout = "n=c=d#-t-as-",
          notes = "\\parbox[t]{16cm}{The table shows the interaction between the effect of risk-weights and the effect of size on cross-border corporate lending. The dependent variable is the logarithm of the amount lent by the bank in a syndicated loan. The main independent variable, $\\text{RW}_{i,t}$, is the average risk-weight of the bank's corporate portfolio in the year that the loan was issued. In all regressions $\\text{RW}_{i,t}$ is instrumented using $\\text{Basel II}_{c,t}$, which is a dummy variable that takes the value of one for the years since the introduction of the Basel II accord in the home country of the lender. $\\text{Log assets}_{i,t}$ is the natural logarithm of the dollar amount of a bank's total asset. $\\text{Assets to GDP}_{i,t}$ is the ratio of banks total assets to their home country's GDP. All regressions include loan and bank fixed effects and the following control variables: the real GDP annual growth rate for the lender's home country, the policy rate of the lender's home country, the ratio of total customer deposits to total asset, the ratio of gross loans to total assets, and the ratio of net interest income to operating income. Clustered standard errors at the loan level are reported in parentheses. *, **, and *** indicate statistical significance at the 10\\%, 5\\%, and 1\\% level respectively.}",
          dep.var.labels   = dep.text,
          covariate.labels = ind.text,
          #order            = c(1, 12, 13, seq(2,11)),
          keep             = c(1, seq(7,16)),
          add.lines        = fe.list,
          #se               = se.list,
          keep.stat        = c("n","adj.rsq"),
          header           = FALSE, 
          font.size        = "scriptsize",
          notes.label      = "",
          notes.align      = "c", 
          notes.append     = FALSE,
          label            = "tab:size",
          style            = "qje",
          column.sep.width = "-1.0pt",
          align            = TRUE,
          #no.space        = TRUE,
          #column.labels    = c("OLS", "IV 1", "IV 2", "IV 3"),
          #column.separate  = c(1,1,1,1),
          #float.env        = "sidewaystable",
          type             = "latex"
  )
```


```{r sup_regressions, echo=FALSE}

# Run the models  
reg.list <- list()
se.list <- list()
F.test.RW <- c()
F.test.aux <- c()


reg.list[[1]] <- felm(log.lender_amount ~   gdp_growth + policy_rate + log.asset+ deposit.ratio +
                        loans.ratio + NII.ratio
                      | as.factor(bvdid)  + tranche_id  |(RW | aux1 ~basel + basel:number_supervisors) | tranche_id,
                      data = filter(mutate(loan.data,       
                                    number_supervisors = log(number_supervisors) - mean(log(number_supervisors), na.rm = TRUE),
                                    RW = RW - mean(RW, na.rm = TRUE),
                                    aux1 = RW*number_supervisors), 
                                    country_name_borrower != country_name, year > 2000))
F.test.RW[1]<-round(reg.list[[1]]$stage1$iv1fstat$RW["F"],1)
F.test.aux[1]<-round(reg.list[[1]]$stage1$iv1fstat$aux1["F"],1)


reg.list[[2]] <- felm(log.lender_amount ~   gdp_growth + policy_rate + log.asset+ deposit.ratio +
                        loans.ratio + NII.ratio
                      | as.factor(bvdid)  + tranche_id  |(RW | aux2 ~basel + basel:freq_onsite) | tranche_id,
                      data = filter(mutate(loan.data,       
                                    freq_onsite = freq_onsite - mean(freq_onsite, na.rm = TRUE),
                                    RW = RW - mean(RW, na.rm = TRUE),
                                    aux2 = RW*freq_onsite), 
                                    country_name_borrower != country_name, year > 2000))
F.test.RW[2]<-round(reg.list[[2]]$stage1$iv1fstat$RW["F"],1)
F.test.aux[2]<-round(reg.list[[2]]$stage1$iv1fstat$aux2["F"],1)





reg.list[[3]] <- felm(log.lender_amount ~  gdp_growth + policy_rate + log.asset+ deposit.ratio +
                        loans.ratio + NII.ratio
                      | as.factor(bvdid)  + tranche_id  |(RW | aux3 ~basel + basel:cb_supervisor) | tranche_id,
                      data = filter(mutate(loan.data,
                                    aux3 = RW*cb_supervisor), 
                                    country_name_borrower != country_name, year > 2000))
F.test.RW[3]<-round(reg.list[[3]]$stage1$iv1fstat$RW["F"],1)
F.test.aux[3]<-round(reg.list[[3]]$stage1$iv1fstat$aux3["F"],1)


```


```{r sup_aux, echo=FALSE}

# Dependent variables
dep.text <- c("$\\text{Log loan}_{l,i}$","$\\text{RW}_{i,t}$", "$\\text{Log loan}_{l,i}$","$\\text{RW}_{i,t}$", "$\\text{Log loan}_{l,i}$","$\\text{RW}_{i,t}$", "$\\text{Log loan}_{l,i}$")

# Independent variables
ind.text <- c(  "$\\text{RW}_{i,t}$", 
                "$\\text{RW}_{i,t} \\times\\text{Log Number of professional supervisors}_{c,t}$",
                "$\\text{RW}_{i,t} \\times\\text{Frequency of onsite inspections}_{c,t}$",
                "$\\text{RW}_{i,t} \\times\\text{Central bank supervisor}_{c,t}$",
                "$\\text{GDP growth rate}_{c,t}$", 
                "$\\text{Policy rate}_{c,t}$",
                "$\\text{Log asset}_{i,t}$",
                "$\\text{Deposit ratio}_{i,t}$",
                "$\\text{Loans ratio}_{i,t}$",
                "$\\text{Net interest income}_{i,t}$")

fe.list <- list(c("Loan FE",    rep("\\multicolumn{1}{c}{Yes}", length(reg.list))),
                c("Bank FE",    rep("\\multicolumn{1}{c}{Yes}", length(reg.list))),
                c("F-value (1st stage on RW)", F.test.RW))

```

```{r sup_table, eval=TRUE, echo=FALSE, results='asis', warning=FALSE, message=FALSE}
stargazer(reg.list,
          title = "Supervision, Risk-weights, and Lending",
          table.layout = "n=c=d#-t-as-",
          notes = "\\parbox[t]{13cm}{The table shows the interaction between the effect of risk-weights and the effect of supervision scrutiny on cross-border corporate lending. The dependent variable is the logarithm of the amount lent by the bank in a syndicated loan. The main independent variable, $\\text{RW}_{i,t}$, is the average risk-weight of the bank's corporate portfolio in the year that the loan was issued. In all regressions $\\text{RW}_{i,t}$ is instrumented using $\\text{Basel II}_{c,t}$, which is a dummy variable that takes the value of one for the years since the introduction of the Basel II accord in the home country of the lender. $\\text{Log Number of professional supervisors}_{c,t}$ is the logarithm of the number of professional supervisors. $\\text{Frequency of onsite inspections}_{c,t}$ is the frequency of on-site inspections conducted in large and medium size banks. $\\text{Central bank supervisor}_{c,t}$ a dummy variable that takes one if the central bank is a supervisor. $\\text{GDP growth rate}_{c,t}$ is the real GDP annual growth rate for the lender's home country. $\\text{Policy rate}_{c,t}$ is the policy rate of the lender's home country. $\\text{Log assets}_{i,t}$ is the natural logarithm of the dollar amount of a bank's total asset. $\\text{Deposit ratio}_{i,t}$ is the ratio of total customer deposits to total asset. $\\text{Loans ratio}_{i,t}$ is the ratio of gross loans to total assets. $\\text{Net interest income}_{i,t}$ is the ratio of net interest income to operating income. All regressions include loan and bank fixed effects. Clustered standard errors at the loan level are reported in parentheses. *, **, and *** indicate statistical significance at the 10\\%, 5\\%, and 1\\% level respectively.}",
          dep.var.labels   = dep.text,
          covariate.labels = ind.text,
          #keep             = seq(7,11),
          order            = seq(7,12),
          add.lines        = fe.list,
          #se               = se.list,
          keep.stat        = c("n","adj.rsq"),
          header           = FALSE, 
          font.size        = "scriptsize",
          notes.label      = "",
          notes.align      = "c", 
          notes.append     = FALSE,
          label            = "tab:sup",
          style            = "qje",
          column.sep.width = "-1.0pt",
          align            = TRUE,
          #no.space        = TRUE,
          #column.labels    = c("OLS", "IV 1", "IV 2", "IV 3"),
          #column.separate  = c(1,1,1,1),
          #float.env        = "sidewaystable",
          type             = "latex"
  )
```




\newpage

\appendix 

\section{} \label{sec:appendixa}
\setcounter{figure}{0}
\renewcommand{\thefigure}{A\arabic{figure}}


```{r fe_regressions, echo=FALSE}
# Run the models
reg.list <- list()
se.list <- list()
F.test <- c()

reg.list[[1]] <- felm(log.lender_amount ~  1
                      | 0 | (RW ~ basel) | tranche_id,
                      data = filter(loan.data, country_name_borrower != country_name, year > 2000))


reg.list[[2]] <- felm(log.lender_amount ~  1
                      | as.factor(bvdid)  | (RW ~ basel) | tranche_id,
                      data = filter(loan.data, country_name_borrower != country_name, year > 2000))

reg.list[[3]] <- felm(log.lender_amount ~  1
                      |   tranche_id | (RW ~ basel) | tranche_id,
                      data = filter(loan.data, country_name_borrower != country_name, year > 2000))

reg.list[[4]] <- felm(log.lender_amount ~  gdp_growth+policy_rate+log.asset  +  deposit.ratio + loans.ratio + NII.ratio 
                      | 0 | (RW ~ basel) | tranche_id,
                      data = filter(loan.data, country_name_borrower != country_name, year > 2000))




```


```{r fe_aux, echo=FALSE}

# Dependent variables
dep.text <- c("$\\text{Log loan}_{l,i}$","$\\text{RW}_{i,t}$", "$\\text{Log loan}_{l,i}$","$\\text{RW}_{i,t}$", "$\\text{Log loan}_{l,i}$","$\\text{RW}_{i,t}$", "$\\text{Log loan}_{l,i}$")

# Independent variables
ind.text <- c("$\\text{RW}_{i,t}$",
              "$\\text{GDP growth rate}_{c,t}$", 
              "$\\text{Policy rate}_{c,t}$",
              "$\\text{Log asset}_{i,t}$",
              "$\\text{Deposit ratio}_{i,t}$",
              "$\\text{Loans ratio}_{i,t}$",
              "$\\text{Net interest income}_{i,t}$")

fe.list <- list(c("Loan FE", "\\multicolumn{1}{c}{No}", "\\multicolumn{1}{c}{No}", "\\multicolumn{1}{c}{Yes}", "\\multicolumn{1}{c}{No}"),
                c("Bank FE", "\\multicolumn{1}{c}{No}", "\\multicolumn{1}{c}{Yes}", "\\multicolumn{1}{c}{No}", "\\multicolumn{1}{c}{No}"),
                c("F-value (1st stage)",    F.test))

```

```{r fe_table, eval=TRUE, echo=FALSE, results='asis', warning=FALSE, message=FALSE}
stargazer(reg.list,
          title = "Risk-weights and Corporate Lending",
          table.layout = "n=c=d#-t-as-",
          notes = "\\parbox[t]{12cm}{TThe table shows the effect of risk-weights on cross-border corporate lending. The dependent variable is the logarithm of the amount lent by the bank in a syndicated loan. The main independent variable, $\\text{RW}_{i,t}$, is the average risk-weight of the bank's corporate portfolio in the year that the loan was issued. The instrumental variable, $\\text{Basel II}_{c,t}$, is a dummy variable that takes the value of one for the years since the introduction of the Basel II accord in the home country of the lender. $\\text{GDP growth rate}_{c,t}$ is the real GDP annual growth rate for the lender's home country. $\\text{Policy rate}_{c,t}$ is the policy rate of the lender's home country. $\\text{Log assets}_{i,t}$ is the natural logarithm of the dollar amount of a bank's total asset. $\\text{Deposit ratio}_{i,t}$ is the ratio of total customer deposits to total asset. $\\text{Loans ratio}_{i,t}$ is the ratio of gross loans to total assets. $\\text{Net interest income}_{i,t}$ is the ratio of net interest income to operating income. All regressions include loan and bank fixed effects. Clustered standard errors at the loan level are reported in parentheses. *, **, and *** indicate statistical significance at the 10\\%, 5\\%, and 1\\% level respectively.}",
          dep.var.labels   = dep.text,
          covariate.labels = ind.text,
          order            = c(7, seq(1,6),8),
          add.lines        = fe.list,
          #se               = se.list,
          keep.stat        = c("n","adj.rsq"),
          header           = FALSE, 
          font.size        = "scriptsize",
          notes.label      = "",
          notes.align      = "c", 
          notes.append     = FALSE,
          label            = "tab:fe",
          style            = "qje",
          column.sep.width = "-1.0pt",
          align            = TRUE,
          #no.space        = TRUE,
          column.labels    = c("OLS", "IV 1", "IV 2"),
          column.separate  = c(1,2,2),
          #float.env        = "sidewaystable",
          type             = "latex"
  )
```
